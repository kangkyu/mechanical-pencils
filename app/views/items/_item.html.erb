<div class="group relative bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden">
    <%= link_to item_path(item), class: "block" do %>
      <div class="aspect-[4/3] overflow-hidden bg-gray-100">
        <%= image_tag item.image.attached? ? item.image : "https://imageplaceholder.net/400x600", class: "h-full w-full object-cover object-center group-hover:scale-105 transition-transform duration-200" %>
      </div>

      <div class="p-4">
        <div class="flex items-start justify-between mb-2">
          <h3 class="text-sm font-semibold text-gray-900 line-clamp-2 group-hover:text-indigo-600 transition-colors"><%= item.title %></h3>
          <% if signed_in? && @owned_item_ids.include?(item.id) %>
            <span class="inline-flex items-center rounded-full bg-emerald-50 px-2 py-1 text-xs font-medium text-emerald-700 ring-1 ring-inset ring-emerald-600/20 ml-2 shrink-0">
              <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
              OWNED
            </span>
          <% end %>
        </div>

        <div class="space-y-1">
          <p class="text-xs text-gray-500"><%= item.item_maker&.title || "Unknown Maker" %></p>
          <p class="text-xs text-gray-400"><%= item.model_number %></p>
        </div>

        <div class="mt-3 flex items-center justify-between">
          <span class="text-xs text-gray-500">
            <%= pluralize @ownership_counts[item.id] || 0, "owner" %>
          </span>
          <div class="flex space-x-1">
            <% if item.tip_retractable == "Yes" %>
              <span class="inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10">Retractable</span>
            <% end %>
            <% if item.eraser_attached == "Yes" %>
              <span class="inline-flex items-center rounded-md bg-purple-50 px-2 py-1 text-xs font-medium text-purple-700 ring-1 ring-inset ring-purple-700/10">Eraser</span>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
